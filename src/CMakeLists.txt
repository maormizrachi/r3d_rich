# set the sources from which to compile the target library

set(r3d_SOURCES
  r2d.c
  r3d.c
  rNd.c
  v2d.c
  v3d.c
  vNd.c)

target_sources(r3d PRIVATE ${r3d_SOURCES})

# What headers should it use and install

set(r3d_HEADERS
  r2d.h
  r3d.h
  rNd.h
  v2d.h
  v3d.h
  vNd.h
  )

list(TRANSFORM r3d_HEADERS PREPEND "${CMAKE_CURRENT_SOURCE_DIR}/")

set_target_properties(r3d PROPERTIES
  PUBLIC_HEADER "${r3d_HEADERS}")

# In addition to the include directories of the source, we need to
# include the build or directory to get the autogenerated r3d-config.h
# (The first of these is needed if R3D is included as a submodule, the
# second is needed for the auto-generated config file if R3D is
# included as a submodule, the third is to get the autogenerated
# config header if R3D is being compiled separately (not sure this has
# been input correctly or in the best manner) and the last is for
# dependencies in installations)

target_include_directories(r3d PUBLIC
  $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}>
  $<BUILD_INTERFACE:${r3d_BINARY_DIR}>
  $<BUILD_INTERFACE:${CMAKE_BINARY_DIR}>
  $<INSTALL_INTERFACE:include>)